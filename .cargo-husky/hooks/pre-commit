#!/bin/bash
set -e

echo "ğŸ” Running pre-commit checks..."
echo ""

# Format check
echo "  ğŸ“ Checking formatting..."
cargo fmt --all -- --check || {
    echo ""
    echo "âŒ Format check failed!"
    echo "   Run: cargo fmt --all"
    exit 1
}

# Clippy (treat warnings as errors)
echo "  ğŸ” Running clippy..."
cargo clippy --workspace --all-features -- -D warnings || {
    echo ""
    echo "âŒ Clippy failed!"
    exit 1
}

# Build check
echo "  ğŸ”¨ Building..."
cargo build --workspace --all-features || {
    echo ""
    echo "âŒ Build check failed!"
    exit 1
}

echo ""
echo "âœ… All pre-commit checks passed!"
echo ""
